<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Plan | Server Analysis</title>
        <meta name="description" content="Player Analysis window">
        <meta name="author" content="Rsl1122">
        <link rel="icon" href="https://puu.sh/tK0KL/6aa2ba141b.ico" type="image/x-icon" />        
        <script src="https://use.fontawesome.com/df48eb908b.js"></script>
        <style>
            * {
                box-sizing: border-box;
            }
            img {
                width: auto;
            }
            body {
                line-height: 140%;
                font-family: Verdana, Geneva, sans-serif;
                font-style: normal;
            }
            header, footer {
                line-height: 40%;
                background-color: #267F00;
                color: white;
                padding: 10px 15px 5px 15px;
                font-family: futura-pt, Futura, Futura-Medium, Verdana, Geneva, sans-serif;
                font-style: normal;
            }
            .column {
                float: left;
                padding: 15px;
            }
            .warn {
                padding: 8px;
                background-color: #ffcc00;
                color: black;
                margin: 0;
            }
            .clearfix::after {
                content: "";
                clear: both;
                display: table;
            }
            .info {
                width: 50%;
            }
            .graphs {
                width: 60%
            }            
            .button {
                padding: 8px 14px;
                background-color: green;
                border: none;
                color: white;
                outline: 0;
                text-decoration:none!important;
            }
            .button:hover {
                background-color: darkgreen;
            }
            .table {
                border-collapse: collapse;
                table-layout: fixed; 
                border-style: solid; 
                border-width: 1px; 
                padding: 8px 14px;
                width: 100%;
            }
            .buttons {
                line-height: 270%;
            }
            .link {
                color: green;
                text-decoration:none!important;
            }
            .link:hover {
                color: darkgreen;
            }
            table.sortable thead {
                background-color: #267F00;
                color:white;
                font-weight: bold;
                cursor: default;
                width: 100%;
                overflow: hidden;
            }
            table.sortable th:not(.sorttable_sorted):not(.sorttable_sorted_reverse):not(.sorttable_nosort):after { 
                content: " \25B4\25BE" 
            }
            #wrapper {
                width: 400%;
                transform: translate3d(0, 0, 0);
                transition: transform .5s ease-in-out;
            }
            .content {
                float: left;
                width: 25%;
                height: 100%;
                white-space: normal;
                background-repeat: no-repeat;
            }
            #contentContainer {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
            #navLinks {
                text-align: center;
                width: 100%;
            }
            #navLinks ul {
                margin: 0px;
                padding: 0px;
                display: inline-block;
                margin-top: 6px;
            }
            #navLinks ul li {
                float: left;
                text-align: center;
                margin: 10px;
                list-style: none;
                cursor: pointer;
                background-color: #267F00;
                color: #FFFFFF;
                font-weight: bold;
                padding: 8px 14px;
            }
            #navLinks ul li:hover {
                background-color: darkgreen;
            }
            #navLinks ul li.active {
                background-color: darkgreen;
                color: #FFFFFF;
                outline-width: 7px;
            }
            .itemLinks {}
        </style>
    </head>
    <body>

        <header>
            <img style="float: right; padding: 5px" src="http://puu.sh/tJZUb/c2e0ab220f.png" alt="Player Analytics | Analysis">
            <p style="float: right; text-align: right;">Player Analytics v.%version%</p>
            <h1>Plan | Server Analysis</h1>
            <h4>Analysis refreshed %refresh% ago</h4>
        </header>
        <div class="clearfix">
            <div id="navLinks">
                <ul>
                    <li class="itemLinks" data-pos="0px"><i class="fa fa-info" aria-hidden="true"></i> Information</li>
                    <li class="itemLinks" data-pos="-25%"><i class="fa fa-pie-chart" aria-hidden="true"></i> Online Activity</li>
                    <li class="itemLinks" data-pos="-50%"><i class="fa fa-list-alt" aria-hidden="true"></i> Playerlist</li>
                    <li class="itemLinks" data-pos="-75%"><i class="fa fa-terminal" aria-hidden="true"></i> Command usage</li>
                </ul>
            </div>
            <div id="contentContainer">
                <div id="wrapper">
                    <div class="content">
                        <div class="column" style="width: 60%;">
                            <h4>Player Activity | Last 24h - New Players: %npday%</h4>
                            <canvas id="playerChartDay" width="1000" height="350" style="width: 95%;"></canvas>
                            <div class="buttons">
                                <p><b>Most recent logins</b>: %recentlogins%</p>
                            </div>
                            %towntable%<br/>
                            %factionstable%
                        </div>
                        <div class="column" style="width: 40%;">
                            <h4>Information</h4>
                            <p>%activitytotal% players have played on this server.<br/>
                                A Total of %totalplaytime% has been played with the average of %avgplaytime%<br/>
                                Players have joined %totallogins% times.<br/>
                                Players have died %deaths% times, of which %playerkills% were caused by another Player.<br/>
                                A Total of %mobkills% mobs have been slain.<br/>
                                The average of known player ages is %avgage%.
                                %essentialswarps%</p>
                            <h4>Gamemode Usage</h4>
                            <canvas id="gmPie" width="1000" height="600" style="width: 95%;"></canvas>
                            <p>Survival: %gm0% | Creative: %gm1% | Adventure: %gm2% | Spectator: %gm3%</p>
                        </div>                        
                    </div>
                    <div class="content">                        
                        <div class="column" style="width: 60%;">
                            <h4>Player Activity | Last 24h - New Players: %npday%</h4>
                            <canvas id="playerChartDay2" width="1000" height="350" style="width: 95%;"></canvas>
                            <h4>Player Activity | Last 7 days - New Players: %npweek%</h4>
                            <canvas id="playerChartWeek" width="1000" height="350" style="width: 95%;"></canvas>
                            <h4>Player Activity | Last 30 days - New Players: %npmonth%</h4>
                            <canvas id="playerChartMonth" width="1000" height="350" style="width: 95%;"></canvas>
                        </div>
                        <div class="column" style="width: 40%;">
                            <h4>Playerbase composition - Total: %activitytotal%</h4>                        
                            <p>Active %active% | Inactive %inactive% | Banned %banned% | Joined once %joinleaver%</p> 
                            <canvas id="activityPie" width="1000" height="600" style="width: 95%;"></canvas>                            
                            <div class="buttons">
                                <p><b>Most recent logins</b>: %recentlogins%</p>
                            </div>
                        </div>
                    </div>
                    <div class="content column">
                        <table class="sortable table">
                            <thead>
                                <tr>
                                    <th>Player</th>
                                    <th>Active</th>
                                    <th>Playtime</th>
                                    <th>Login times</th>
                                    <th>Registered</th>
                                    <th>Last seen</th>
                                    <th>Geolocation</th>
                                </tr>
                            </thead>
                            <tbody>
                                %sortabletable%
                            </tbody>
                        </table>
                    </div>
                    <div class="content column">
                        <table class="sortable table">
                            <thead>
                                <tr>
                                    <th>Command</th>
                                    <th>Times used</th>
                                </tr>
                            </thead>
                            <tbody>
                                %commanduse%
                            </tbody>
                        </table>
                    </div>
                </div>
            </div></div>
    </body>
    <script src="http://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js"></script>
    <script>
        // Script for All charts using Chart.js
        var ctxday = document.getElementById("playerChartDay");        
        var ctxday2 = document.getElementById("playerChartDay2");        
        var ctxweek = document.getElementById("playerChartWeek");        
        var ctxmonth = document.getElementById("playerChartMonth");        
        var ctxactivitypie = document.getElementById("activityPie");        
        var ctxgmpie = document.getElementById("gmPie");        
        var dataday = {
            labels: %labelsday%,
            datasets: [
                {
                label: "Players Online",
                fill: true,
                lineTension: 0.1,
                backgroundColor: "#%playersgraphfill%",
                borderColor: "#%playersgraphcolor%",
                borderCapStyle: 'butt',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "#%playersgraphcolor%",
                pointBackgroundColor: "#fff",
                pointBorderWidth: 1,
                pointHoverRadius: 5,
                pointHoverBackgroundColor: "#%playersgraphcolor%",
                pointHoverBorderColor: "#8fabc6",
                pointHoverBorderWidth: 2,
                pointRadius: 1,
                pointHitRadius: 10,
                spanGaps: false,
                data: %dataday%,
            }]
        }
        var dataweek = {
            labels: %labelsweek%,
            datasets: [
                {
                label: "Players Online",
                fill: true,
                lineTension: 0.1,
                backgroundColor: "#%playersgraphfill%",
                borderColor: "#%playersgraphcolor%",
                borderCapStyle: 'butt',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "#%playersgraphcolor%",
                pointBackgroundColor: "#fff",
                pointBorderWidth: 1,
                pointHoverRadius: 5,
                pointHoverBackgroundColor: "#%playersgraphcolor%",
                pointHoverBorderColor: "#8fabc6",
                pointHoverBorderWidth: 2,
                pointRadius: 1,
                pointHitRadius: 10,
                spanGaps: false,
                data: %dataweek%,
            }]
        }
        var datamonth = {
            labels: %labelsmonth%,
            datasets: [
                {
                label: "Players Online",
                fill: true,
                lineTension: 0.1,
                backgroundColor: "#%playersgraphfill%",
                borderColor: "#%playersgraphcolor%",
                borderCapStyle: 'butt',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "#%playersgraphcolor%",
                pointBackgroundColor: "#fff",
                pointBorderWidth: 1,
                pointHoverRadius: 5,
                pointHoverBackgroundColor: "#%playersgraphcolor%",
                pointHoverBorderColor: "#8fabc6",
                pointHoverBorderWidth: 2,
                pointRadius: 1,
                pointHitRadius: 10,
                spanGaps: false,
                data: %datamonth%,
            }]
        }
        var dataActivityPie = {
            labels: %labelsactivity%,
            datasets: [
                {
                    data: %activitydata%,
                    backgroundColor: [%activitycolors%],
                    hoverBackgroundColor: [%activitycolors%]
                }
            ]
        }
        var ActivityPie = new Chart(ctxactivitypie, {
           type: 'doughnut',
           data: dataActivityPie,
           options: {
               legend: {
                   position: 'right',
                   labels: {
                       padding: 7
                   }
               }
           }
        });
        var dataGmPie = {
            labels: %gmlabels%,
            datasets: [
                {
                    data: %gmdata%,
                    backgroundColor: [%gmcolors%],
                    hoverBackgroundColor: [%gmcolors%]
                }
            ]
        }
        var GMPie = new Chart(ctxgmpie, {
           type: 'doughnut',
           data: dataGmPie,
           options: {
               legend: {
                   position: 'right',
                   labels: {
                       padding: 7
                   }
               }
           }
        });
        var playersChartDay = new Chart(ctxday, {
            type: 'line',
            data: dataday,
            options: {
                scales: {
                    xAxes: [{
                            display: false
                    }]
                }
            }
        });
        var playersChartDay2 = new Chart(ctxday2, {
            type: 'line',
            data: dataday,
            options: {
                scales: {
                    xAxes: [{
                            display: false
                    }]
                }
            }
        });
        var playersChartWeek = new Chart(ctxweek, {
            type: 'line',
            data: dataweek,
            options: {
                scales: {
                    xAxes: [{
                            display: false
                    }]
                }
            }
        });
        var playersChartMonth = new Chart(ctxmonth, {
            type: 'line',
            data: datamonth,
            options: {
                scales: {
                    xAxes: [{
                            display: false
                    }]
                }
            }
        });
    </script>
    <script>
        // Script for the page navigation buttons
        var links = document.querySelectorAll(".itemLinks");
        var wrapper = document.querySelector("#wrapper");

        // the activeLink provides a pointer to the currently displayed item
        var activeLink = 0;

        // setup the event listeners
        for (var i = 0; i < links.length; i++) {
            var link = links[i];
            link.addEventListener('click', setClickedItem, false);

            // identify the item for the activeLink
            link.itemID = i;
        }

        // set first item as active
        links[activeLink].classList.add("active");

        function setClickedItem(e) {
            removeActiveLinks();

            var clickedLink = e.target;
            activeLink = clickedLink.itemID;

            changePosition(clickedLink);
        }

        function removeActiveLinks() {
            for (var i = 0; i < links.length; i++) {
                links[i].classList.remove("active");
            }
        }
        // Handle changing the slider position as well as ensure
        // the correct link is highlighted as being active
        function changePosition(link) {
            var position = link.getAttribute("data-pos");

            var translateValue = "translate3d(" + position + ", 0px, 0)";
            wrapper.style.transform = translateValue;

            link.classList.add("active");
        }
    </script>
</html>