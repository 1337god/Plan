<!DOCTYPE html>
<html>
<head>
    <title>Plan | Inspect %name%</title>
    <meta name="description" content="Player Analysis window">
    <meta name="author" content="Rsl1122">
    <link rel="icon" href="https://puu.sh/tK0KL/6aa2ba141b.ico" type="image/x-icon"/>
    <script src="https://use.fontawesome.com/df48eb908b.js"></script>
    <style>
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 88px;
            padding: 0;
            background-color: #348e0f;
            z-index: 1;
        }
        .header-content {
            padding: 5px 20px;
        }
        body {
            font-family: Verdana, sans-serif;
            background-color: #ddd;
            color: #fff;
        }
        .sidenav {
            height: 100%;
            width: 15%;
            position: fixed;
            top: 0;
            left: 0;
            background-color: #5cb239;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 88px;
            text-align: left;
        }
        .sidenav p {
            width: 100%;
            padding: 8px 8px 8px 16px;
            text-decoration: none;
            background-color: #89c471;
            color: #fff;
            margin: 10px 0;
        }

        .sidenav a {
            margin: 10px 0;
            width: 100%;
            padding: 8px 8px 8px 16px;
            text-decoration: none;
            background-color: #89c471;
            font-size: 22px;
            color: #fff;
            display: block;
            transition: 0.3s;
            z-index: 1;
        }

        .sidenav a.active {
            background-color: #5da341
        }

        .sidenav a:hover, .offcanvas a:focus{
            background-color: #5da341;
        }

        .main-limiter {
            margin-left: 15%;
            width: 85%;
            height: 100%;
            overflow: hidden;
        }

        .main-wrapper {
            padding-top: 88px;
            transform: translate3d(0, 0, 0);
            opacity: 0;
            transition: 1.5s;
        }

        .box {
            background-color: #fff;
            padding: 5px;
            text-decoration: none;
            color: #000;
            text-align: left;
            margin: 5px;
        }

        .box p {
            color: #000;
        }

        .tab {
            width: 20%;
            height: 100%;
            float: left;
            display: flex;
            text-align: left;
            align-content: flex-start;
        }
        .row {
            width: 50%;
            display: flex;
            flex-direction: column;
        }
        .content {
            text-align: center;
            padding: 5px;
            margin: 0;
        }

        .columns {
            display: flex;
        }

        .column {
            flex: 1;
        }

        .infobox {
            margin-left: 3px;
            color: white;
            background-color: #348e0f;
            padding: 8px 14px;
            border-radius: 10px;
            float: right;
        }
        .info-text {
            float: right;
            width: 50%;
            text-align: right;
        }
        .info-number {
            font-size: x-large;
            float: right;
        }
        .info-label {
            float: right;
            font-size: medium;
        }
        .info-icon {
            font-size: xx-large;
            float: left;
        }
        .headerbox {
            color: #348e0f;
            display: inline-block;
            border: solid #348e0f;
            padding: 8px 14px;
            border-radius: 10px;
            width: 95%;
        }
        .header-icon {
            font-size: xx-large;
            float: left;
        }
        .header-text {
            font-size: x-large;
        }
        .header-label {
            padding: 0;
            margin: 0;
            border: 0;
        }

        .table {
            border-collapse: collapse;
            table-layout: fixed;
            border: 1px solid;
            padding: 8px 14px;
            width: 100%;
        }

        .link {
            color: #348e0f;
            text-decoration:none!important;
        }
        .link:hover {
            color: #267F00;
        }
        table.sortable thead {
            background-color: #348e0f;
            color:#fff;
            font-weight: bold;
            cursor: default;
            width: 100%;
            overflow: hidden;
        }
        table.sortable tbody {
            color: #000;
        }
        table.sortable th:not(.sorttable_sorted):not(.sorttable_sorted_reverse):not(.sorttable_nosort):after {
            content: " \25B4\25BE"
        }
        .plugin-container {
            color: #000;
            height: 100%;
            max-height: 400px;
            overflow: auto;
        }
        .plugin-data {
            color: #000;
        }
        .black {
            color: #000000;
        }
        .darkblue {
            color: #0000AA;
        }
        .darkgreen {
            color: #00AA00;
        }
        .darkaqua {
            color: #00AAAA;
        }
        .darkred {
            color: #AA0000;
        }
        .darkpurple {
            color: #AA00AA;
        }
        .gold {
            color: #FFAA00;
        }
        .gray {
            color: #AAAAAA;
        }
        .darkgray {
            color: #555555;
        }
        .blue {
            color: #5555FF;
        }
        .green {
            color: #55FF55;
        }
        .aqua {
            color: #55FFFF;
        }
        .red {
            color: #FF5555;
        }
        .pink {
            color: #FF55FF;
        }
        .yellow {
            color: #FFFF55;
        }
        .white {
            color: #FFFFFF;
        }
        #navbutton {
            display: none;
            font-size: 40px;
            cursor:pointer;
        }
        @media only screen and (max-width: 850px) {
            #navbutton {
                display: inline;
            }
            .sidenav p {
                display: none;
            }
            header {
                margin: 0;
                padding: 0;
            }
            header h1 {
                margin: 0;
            }
            header img {
                margin: 0px;
                padding: 0;
            }
            header p {
                margin: 5px 0px 0px;
            }
            .tab {
                flex-direction: column;
            }
            .columns {
                flex-direction: column;
            }
            .row {
                width: 100%;
            }
            .sidenav {
                width: 0;
                transition: 0s;
            }
            .main-limiter {
                margin-left: 0;
                width: 100%;
            }
        }

    </style>
</head>
<body>
<header>
    <div class="header-content">
        <img style="float: right; padding: 5px" src="https://puu.sh/tJZUb/c2e0ab220f.png"
             alt="Player Analytics | Analysis">
        <p style="float: right; text-align: right;">Player Analytics v.%version%</p>
        <h1><span id="navbutton" onclick="openNav()">&#9776; </span>%servername% | Inspect Player %name%%op%</h1>
    </div>
</header>
<div id="content" class="content">
    <div id="sidenav" class="sidenav">
        <p>Last Refresh: <br><span id="divTime">%refresh%</span> ago</p>
        <a href="javascript:void(0)" class="nav-button">
            <i class="fa fa-info-circle" aria-hidden="true"></i> Information
        </a>
        <a href="javascript:void(0)" class="nav-button">
            <i class="fa fa-calendar" aria-hidden="true"></i> Sessions
        </a>
        <a href="javascript:void(0)" class="nav-button">
            <i class="fa fa-cubes" aria-hidden="true"></i> Plugins
        </a>
    </div>
    <div id="limiter" class="main-limiter">
        <div id="main" class="main-wrapper">
            <div class="tab">
                <div class="row">
                    <div class="about box column">
                        <div class="headerbox">
                            <div class="header-icon">
                                <div class="header-label"><i class="fa fa-info-circle" aria-hidden="true"></i><span
                                        class="header-text"> Information</span></div>
                            </div>
                            <div class="infobox" style="float: right;">
                                <div class="info-icon">
                                    <i class="fa fa-user-plus" aria-hidden="true"></i>
                                </div>
                                <div class="info-text" style="width: 70%;">
                                    <div class="info-number">
                                        %registered%
                                    </div>
                                    <div class="info-label">
                                        Registered
                                    </div>
                                </div>
                            </div>
                        </div>
                        <img style="float: right; padding: 5px" alt="%name%"
                             src="https://cravatar.eu/head/%name%/128.png">
                        <p><i class="fa fa-user" aria-hidden="true"></i> %active% %isonline%%banned%<br/>
                            <i class="fa fa-address-card-o" aria-hidden="true"></i> Nicknames: %nicknames%<br/>
                            <i class="fa fa-clock-o" aria-hidden="true"></i> Playtime: %playtime%<br/>
                            <i class="fa fa-calendar-plus-o" aria-hidden="true"></i> Login times: %logintimes%<br/>
                            <i class="fa fa-gavel" aria-hidden="true"></i> Times kicked: %timeskicked%<br/>
                            <i class="fa fa-crosshairs" aria-hidden="true"></i> Player kills: %playerkills% | <i
                                    class="fa fa-crosshairs" aria-hidden="true"></i> Mob kills: %mobkills% | <i
                                    class="fa fa-meh-o" aria-hidden="true"></i> Deaths: %deaths%<br/>
                            <br/>
                            <i class="fa fa-globe" aria-hidden="true"></i> Geolocation: %geoloc%<br/>
                            <i class="fa fa-tag" aria-hidden="true"></i> UUID: %uuid%<br/>
                            <i class="fa fa-globe" aria-hidden="true"></i> Has Connected from ips: %ips%</p>
                    </div>
                    <div class="about box column">
                        <div id="worldPie" style="width: 100%; height: 400px;"></div>
                    </div>
                    <div class="about box column">
                        <div id="gmPie" style="width: 100%; height: 400px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="about box column">
                        <div class="headerbox">
                            <div class="header-icon">
                                <div class="header-label"><i class="fa fa-bar-chart" aria-hidden="true"></i><span
                                        class="header-text"> Player Activity: 7d</span></div>
                            </div>
                            <div class="infobox" style="float: right;">
                                <div class="info-icon">
                                    <i class="fa fa-calendar-check-o" aria-hidden="true"></i>
                                </div>
                                <div class="info-text" style="width: 70%;">
                                    <div class="info-number">
                                        %lastseen%
                                    </div>
                                    <div class="info-label">
                                        Last seen
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="playerChart" style="width:100%; height:350px;"></div>
                    </div>
                    <div class="about box column">
                        <div class="headerbox">
                            <div class="header-icon">
                                <div class="header-label"><i class="fa fa-crosshairs" aria-hidden="true"></i><span
                                        class="header-text"> Last 25 Kills</span></div>
                            </div>
                            <div class="infobox" style="float: right;">
                                <div class="info-icon">
                                    <i class="fa fa-crosshairs" aria-hidden="true"></i>
                                </div>
                                <div class="info-text" style="width: 70%;">
                                    <div class="info-number">
                                        %playerkills%
                                    </div>
                                    <div class="info-label">
                                        Player Kills
                                    </div>
                                </div>
                            </div>
                        </div>
                        %killstable%
                    </div>
                </div>
            </div>
            <div class="tab">
                <div class="row">
                    <div class="about box column">
                        <div class="headerbox">
                            <div class="header-icon" style="width: 50%">
                                <div class="header-label"><i class="fa fa-braille" aria-hidden="true"></i><span
                                        class="header-text"> PunchCard</span></div>
                            </div>
                            <div class="infobox">
                                <div class="info-icon">
                                    <i class="fa fa-calendar-plus-o" aria-hidden="true"></i>
                                </div>
                                <div class="info-text" style="width: 70%;">
                                    <div class="info-number">
                                        %logintimes%
                                    </div>
                                    <div class="info-label">
                                        Login Times
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="punchcard" style="width: 100%; height:400px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="about box column">
                        <div class="headerbox">
                            <div class="header-icon">
                                <div class="header-label"><i class="fa fa-bar-chart" aria-hidden="true"></i><span
                                        class="header-text"> Length Distribution</span></div>
                            </div>
                            <div class="infobox">
                                <div class="info-icon">
                                    <i class="fa fa-clock-o" aria-hidden="true"></i>
                                </div>
                                <div class="info-text" style="width: 70%;">
                                    <div class="info-number">
                                        %sessionaverage%
                                    </div>
                                    <div class="info-label">
                                        Average Length
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="sessionDistribution" style="width: 100%; height:400px;"></div>
                    </div>
                </div>
            </div>
            <div class="tab" style="display: block;">
                %plugins%
            </div>
        </div>
    </div>
    <script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script>
        function formatTime(seconds) {
            var out = "";
            seconds = Math.floor(seconds / 1000);

            var dd = Math.floor(seconds / 86400);
            seconds -= (dd * 86400);

            var dh = Math.floor(seconds / 3600);
            seconds -= (dh * 3600);

            var dm = Math.floor(seconds / 60);
            seconds -= (dm * 60);

            seconds = Math.floor(seconds);

            if (dd !== 0) {
                out += dd.toString() + "d ";
            }
            if (dh !== 0) {
                out += dh.toString() + "h ";
            }
            if (dm !== 0) {
                out += dm.toString() + "m ";
            }
            out += seconds.toString() + "s ";
            return out;
        }
        var playersOnlineSeries = {
			name: 'Online',
			data: %playersonlineseries%,
			type: 'areaspline',
			color: '#%playersgraphcolor%',
            tooltip: {
                valueDecimals: 0
            }
		};
        var gmData = %gmdata%;
		var gmSeries = {
			name: 'GM Usage',
			colorByPoint: true,
			data: [{
				name: 'Survival',
				y: gmData[0],
				sliced: true,
				selected: true
			}, {
				name: 'Creative',
				y: gmData[1]
			}, {
				name: 'Adventure',
				y: gmData[2]
			}, {
				name: 'Spectator',
				y: gmData[3]
			}]
		};
		var worldSeries = {
		    name: 'World Playtime',
		    colorByPoint: true,
		    data: %worldseries%
		};
		var sessionLengthSeries = {
			name: 'Sessions',
			color: '#89c471',
			data: %sessionlengthseries%
		};
		var punchcardSeries = {
			name: 'Relative Activity',
			color: '#222',
			data: %punchcardseries%
		};
    </script>
    <script>
		function playersChart() {
			Highcharts.stockChart('playerChart', {
				rangeSelector: {
					selected: 2,
					buttons: [{
						type: 'hour',
						count: 12,
						text: '12h'
					},{
						type: 'hour',
						count: 24,
						text: '24h'
					},{
						type: 'day',
						count: 7,
						text: '7d'
					},{
						type: 'month',
						count: 1,
						text: '30d'
					},{
						type: 'all',
						text: 'All'
					}]
				},
				plotOptions: {
					areaspline: {
						fillOpacity: 0.4
					}
				},
				title: {text: 'Online Activity'},
				series: [playersOnlineSeries]
			});
		}
	</script>
    <script>
        function gmPie() {
            Highcharts.chart('gmPie', {
                chart: {
                    plotBackgroundColor: null, plotBorderWidth: null, plotShadow: false,
                    type: 'pie'
                },
                title: {text: 'Gamemode Usage'},
				subtitle: {text: '%gmtotal%'},
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.2f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
						colors: [%gmcolors%],
                        showInLegend: true
                    }
                },
                series: [gmSeries]
            });
        };
    </script>
    <script>
        function worldPie() {
            Highcharts.chart('worldPie', {
                chart: {
                    plotBackgroundColor: null,
					plotBorderWidth: null,
					plotShadow: false,
                    type: 'pie'
                },
                title: {text: 'World Playtime'},
				subtitle: {text: '%worldtotal%'},
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.2f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [worldSeries]
            });
        };

    </script>
    <script>
		function punchCard() {
			Highcharts.chart('punchcard' , {
				chart: {
					defaultSeriesType: 'scatter'
				},
				title: {
					text: 'Player Join PunchCard'
				},
				xAxis: {
					type: 'datetime',
					dateTimeLabelFormats: {
						hour: '%I %P'
					},
					tickInterval: 3600000
				},
				yAxis: {
				  categories: ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']
				},
				tooltip: {
					pointFormat: 'Activity: {point.z}'
				},
				series: [punchcardSeries]
			});
		}
	</script>
    <script>
        function sessionDistributionChart() {
			Highcharts.chart('sessionDistribution', {
				chart: {
					type: 'column'
				},
				title: {
					text: 'Session Length Distribution'
				},
				xAxis: {
					type: 'category',
					labels: {
						rotation: -45
					}
				},
				 yAxis: {
					min: 0,
					title: {
						text: 'Sessions'
					}
				},
				legend: {
					enabled: false
				},
				plotOptions: {
					series: {
						groupPadding: 0
					},
					pointPadding: 0
				},
				series: [sessionLengthSeries]
			});
		};
    </script>
    <script>
        function openNav() {
            document.getElementById("sidenav").style.width = "100%";
            document.getElementById("limiter").style.display = "none";
            document.getElementById("navbutton").onclick = function () { closeNav(); };
        }
        function closeNav() {
            document.getElementById("sidenav").style.width = "0%";
            document.getElementById("limiter").style.display = "block";
            document.getElementById("navbutton").onclick = function () { openNav(); };
        }
        var navButtons = document.getElementsByClassName("nav-button");
        var tabs = document.getElementsByClassName("tab");
        var slideIndex = window.sessionStorage.getItem("InspectSlideIndex");
        if (slideIndex === null) {
            slideIndex = 0;
        }
        var x = document.getElementById("main");

        x.style.transform = "translate3d(0px,0px,0)";
        x.style.width = ""+navButtons.length*100+"%";

        for (var i = 0; i < navButtons.length; i++) {
            navButtons[i].onclick = openFunc(i)
            tabs[i].style.width = ""+100/navButtons.length+"%";
        }
        x.style.opacity = "1";
        openFunc(slideIndex)();

        playersChart();
        sessionDistributionChart();
        gmPie();
        worldPie();
        punchCard();

        countUpTimer();

        function openFunc(i) {
            return function() {
                if (window.getComputedStyle(document.getElementById("navbutton")).getPropertyValue('display') == "inline") {
                    closeNav();
                }
                var max = navButtons.length;
                for (var j = 0; j < max; j++) {
                    if (j == i) {
                        navButtons[j].classList.add('active');
                        continue;
                    }
                    if (navButtons[j].classList.contains('active')) {
                        navButtons[j].classList.remove('active');
                    }
                }
                var perc = -100 / navButtons.length;
                slideIndex = i;
                if (slideIndex>max) {slideIndex=0};
                if (slideIndex<0) {slideIndex=max};
                window.sessionStorage.setItem("InspectSlideIndex", slideIndex);
                var value = slideIndex*perc;
                x.style.transition = "0.5s";
                x.style.transform = "translate3d("+value+"%,0px,0)";
            };
        }

        function countUpTimer() {
            var now = new Date();
            var begin = new Date(%refreshlong%);
            var seconds = now.getTime() - begin.getTime();

            var out = formatTime(seconds);

            document.getElementById('divTime').innerHTML = out;
            setTimeout('countUpTimer()', 1000);
        }
    </script>
</div>
</body>
</html> 